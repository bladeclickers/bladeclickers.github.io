<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>bladeclickers</title>
  <meta name="description" content="">
  <link id="favicon" rel="icon" href="ryh.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI Semibold', sans-serif;
      background-color: #333333; /* dark gray background */
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
      overflow: auto;
    }

    .button-link {
      display: block;
      text-decoration: none;
      color: black;
      font-family: 'Segoe UI Semibold', sans-serif;
      background-color: #EEEEEE;
      padding: 10px;
      border-radius: 15px;
      text-align: center;
      width: 240px;
      margin: 10px;
      transition: background-color 0.3s;
      cursor: pointer;
    }

    .button-link:hover {
      background-color: #FFFFFF;
    }

    .sigma {
      display: block;
      height: 120px;
      width: 160px;
      border-radius: 15px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #ffffff, 0 0 20px #cccccc, 0 0 30px #999999;
      transition: text-shadow 0.3s;
    }

    h1:hover {
      text-shadow: 0 0 20px #ffffff, 0 0 40px #dddddd, 0 0 60px #bbbbbb;
    }

    h5 {
      color: white;
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #ffffff, 0 0 20px #cccccc, 0 0 30px #999999;
      transition: text-shadow 0.3s;
    }

    h5:hover {
      text-shadow: 0 0 20px #ffffff, 0 0 40px #dddddd, 0 0 60px #bbbbbb;
    }

    .button-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
    }

    #searchInput {
      font-family: 'Segoe UI Semibold', sans-serif;
      font-size: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      border-radius: 10px;
      border: none;
      padding: 10px;
      width: 250px;
      text-align: center;
      margin-bottom: 20px;
    }

    #categorySelect {
      font-family: 'Segoe UI Semibold', sans-serif;
      font-size: 16px;
      padding: 10px;
      border-radius: 10px;
      border: none;
      width: 200px;
      margin-bottom: 20px;
    }

    .game-iframe {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      border: none;
      z-index: 9999;
    }

    #backButton {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 10000;
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 50%;
      background: #FFFFFFAA url('back.png') no-repeat center center;
      background-size: 50%;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      transition: background-color 0.2s;
    }
    
    #backButton:hover {
      background-color: #FFFFFF;
    }

    #errorMsg {
      color: white;
      font-size: 20px;
      text-align: center;
      margin-top: 40px;
    }

    .thing {
      display: flex;
      justify-content: center; /* horizontal alignment */
      align-items: center;     /* vertical alignment */
    }
  </style>

  <!-- Load local Ruffle -->
  <script src="ruffle/ruffle.js"></script>
</head>
<body>
  <div class="thing">
    <img src="logo2.png" id="logoImage" style="width:75px;height:75px;"/>
    <h1>bladeclickers.github.io</h1>
  </div>

  <div class="thing">
    <img src="pfp.png" id="bladeskilledIcon" style="width:30px;height:30px;"/>
    <h5>    made by bladeskilled.</h5>
  </div>

  <!-- Search Input -->
  <div style="text-align: center;">
    <input type="text" id="searchInput" placeholder="Search games..">
  </div>

  <!-- Category Dropdown -->
  <div style="text-align: center;">
    <label for="categorySelect" id="categoryText" style="color: white; margin-right: 10px;">Category:</label>
    <select id="categorySelect">
      <option value="">All</option>
      <option value="3d">3D</option>
      <option value="action">Action</option>
      <option value="adventure">Adventure</option>
      <option value="arcade">Arcade</option>
      <option value="shooter">Shooter</option>
      <option value="platformer">Platformer</option>
      <option value="racing">Racing</option>
      <option value="puzzle">Puzzle</option>
      <option value="strategy">Strategy</option>
      <option value="simulation">Simulation</option>
      <option value="sports">Sports</option>
      <option value="multiplayer">Multiplayer</option>
      <option value="idle">Idle</option>
      <option value="horror">Horror</option>
      <option value="fighting">Fighting</option>
      <option value="board">Board</option>
      <option value="card game">Card Game</option>
      <option value="music">Music</option>
      <option value="survival">Survival</option>
      <option value="rpg">RPG</option>
    </select>
  </div>

  <div class="button-container"></div>

  <script src="gamelist.js"></script>
  <script>
    const container = document.querySelector('.button-container');
    const searchInput = document.getElementById('searchInput');
    const categorySelect = document.getElementById('categorySelect');

    async function urlExists(url) {
      try {
        const res = await fetch(url, { method: "HEAD" });
        return res.ok;
      } catch {
        return false;
      }
    }

    function renderGames(filter = '', category = '') {
      container.innerHTML = '';

      const filteredGames = games.filter(game => {
        // Match category
        const matchesCategory =
          category === '' ||
          (Array.isArray(game.category) &&
            game.category.some(cat => cat.toLowerCase().includes(category.toLowerCase())));
      
        // Match name
        const matchesName = game.formatted_Name.toLowerCase().includes(filter.toLowerCase());
      
        return matchesCategory && matchesName;
      });

      filteredGames.forEach(game => {
        const link = document.createElement('div');
        link.className = 'button-link';

        const img = document.createElement('img');
        img.className = 'sigma';
        img.src = `https://raw.githubusercontent.com/CoolUBG/CoolUBG.github.io/refs/heads/main/images/games-256/${game.name}.png`;
        img.alt = game.formatted_Name;
        
        img.onerror = () => {
          img.onerror = null;
          img.src = `images/${game.name}.jpg`;
        };

        const title = document.createElement('div');
        title.textContent = game.formatted_Name;

        link.appendChild(img);
        link.appendChild(title);

        link.addEventListener('click', async () => {
          history.pushState({ playing: true }, '', '#game');

          const backButton = document.createElement('button');
          backButton.id = 'backButton';
          backButton.addEventListener('click', () => history.back());

          document.querySelector('h1').style.display = 'none';
          document.getElementById('searchInput').style.display = 'none';
          document.getElementById('logoImage').style.display = 'none';
          document.getElementById('bladeskilledIcon').style.display = 'none';
          document.getElementById('categoryText').style.display = 'none';
          categorySelect.style.display = 'none';
          container.style.display = 'none';

          document.body.appendChild(backButton);

          const indexUrl = `https://bladeclickers.github.io/${game.name}/index.html`;
          const swfUrl   = `https://bladeclickers.github.io/${game.name}.swf`;

          if (await urlExists(indexUrl)) {
            const iframe = document.createElement('iframe');
            iframe.className = 'game-iframe';
            iframe.src = indexUrl;
            iframe.id = 'gameFrame';
            document.body.appendChild(iframe);
          } else if (await urlExists(swfUrl)) {
            const ruffle = window.RufflePlayer.newest();
            const player = ruffle.createPlayer();
            player.id = "gameFrame";
            player.style.width = "100vw";
            player.style.height = "100vh";
            document.body.appendChild(player);
            player.load(swfUrl);
          } else {
            const msg = document.createElement('div');
            msg.id = 'errorMsg';
            msg.textContent = "âŒ Game not found.";
            document.body.appendChild(msg);
          }
        });

        container.appendChild(link);
      });
    }

    renderGames();

    searchInput.addEventListener('input', (e) => {
      renderGames(e.target.value, categorySelect.value);
    });

    categorySelect.addEventListener('change', (e) => {
      renderGames(searchInput.value, e.target.value);
    });

    window.addEventListener('popstate', () => {
      const gameFrame = document.getElementById('gameFrame');
      const backButton = document.getElementById('backButton');
      const errorMsg = document.getElementById('errorMsg');

      if (gameFrame) gameFrame.remove();
      if (backButton) backButton.remove();
      if (errorMsg) errorMsg.remove();

      document.querySelector('h1').style.display = '';
      document.getElementById('searchInput').style.display = '';
      document.getElementById('logoImage').style.display = '';
      document.getElementById('bladeskilledIcon').style.display = '';
      document.getElementById('categoryText').style.display = '';
      categorySelect.style.display = '';
      container.style.display = '';
    });
  </script>
</body>
</html>
















